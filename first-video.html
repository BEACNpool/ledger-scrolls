<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#030508">
    <title>The First Video Ever Stored on a Blockchain â€” Ledger Scrolls</title>
    <meta name="description" content="Watch history being made. The first video ever stored entirely on a blockchain, reconstructed live from 175 on-chain NFTs. No servers. No links. Pure blockchain.">
    <meta property="og:title" content="The First Video Ever Stored on a Blockchain">
    <meta property="og:description" content="175 NFTs. Zero servers. One historic moment. Watch the first video reconstructed live from the Cardano blockchain.">
    <meta property="og:type" content="video.other">
    <meta property="og:image" content="https://beacnpool.org/assets/first-video-preview.png">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;800;900&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@300;400;500&family=Sora:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¬</text></svg>">
    <style>
        :root {
            --void: #030508;
            --deep: #080c14;
            --surface: #0e1320;
            --surface2: #151c2e;
            --surface3: #1c2540;
            --gold: #d4a855;
            --gold-bright: #ffd700;
            --gold-pale: #f0d78c;
            --gold-dim: #9a7b3a;
            --gold-glow: rgba(212, 168, 85, 0.35);
            --cyan: #22d3ee;
            --cyan-glow: rgba(34, 211, 238, 0.25);
            --text: #eef2f7;
            --text-dim: #94a3b8;
            --text-muted: #5a6578;
            --font-display: 'Cinzel', serif;
            --font-body: 'Cormorant Garamond', serif;
            --font-ui: 'Sora', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            background: var(--void);
            color: var(--text);
            font-family: var(--font-ui);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BACKGROUND â€” Deep space atmosphere
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .bg-cosmos {
            position: fixed; inset: 0; z-index: 0;
            pointer-events: none; overflow: hidden;
        }
        .bg-cosmos::before {
            content: '';
            position: absolute; inset: -40%;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(212, 168, 85, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(34, 211, 238, 0.04) 0%, transparent 45%),
                radial-gradient(ellipse at 50% 50%, rgba(255, 215, 0, 0.03) 0%, transparent 60%);
            animation: cosmicDrift 30s ease-in-out infinite alternate;
        }
        @keyframes cosmicDrift {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(3%, -2%) scale(1.08); }
        }

        /* Star field */
        .starfield {
            position: fixed; inset: 0; z-index: 0;
            pointer-events: none;
        }
        .star {
            position: absolute;
            border-radius: 50%;
            background: white;
            animation: starTwinkle var(--dur) ease-in-out infinite alternate;
        }
        @keyframes starTwinkle {
            0% { opacity: var(--o1); transform: scale(1); }
            100% { opacity: var(--o2); transform: scale(1.3); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CINEMA INTRO OVERLAY â€” The "Premiere" feel
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .cinema-intro {
            position: fixed; inset: 0; z-index: 1000;
            background: var(--void);
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            transition: opacity 1.2s ease, visibility 1.2s ease;
        }
        .cinema-intro.fade-out {
            opacity: 0; visibility: hidden;
        }
        .cinema-tagline {
            font-family: var(--font-display);
            font-size: clamp(0.7rem, 2vw, 0.95rem);
            letter-spacing: 6px;
            text-transform: uppercase;
            color: var(--gold);
            opacity: 0;
            animation: fadeSlideUp 1s 0.5s ease forwards;
        }
        .cinema-title {
            font-family: var(--font-display);
            font-size: clamp(1.8rem, 6vw, 3.5rem);
            font-weight: 700;
            text-align: center;
            background: linear-gradient(135deg, var(--gold-bright) 0%, var(--gold) 40%, var(--gold-pale) 70%, var(--gold) 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeSlideUp 1.2s 1s ease forwards, shimmer 4s ease-in-out infinite;
            opacity: 0;
            margin: 16px 0;
            line-height: 1.2;
            padding: 0 20px;
        }
        .cinema-subtitle {
            font-family: var(--font-body);
            font-size: clamp(1rem, 3vw, 1.4rem);
            font-style: italic;
            color: var(--text-dim);
            opacity: 0;
            animation: fadeSlideUp 1s 1.8s ease forwards;
        }
        @keyframes fadeSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Divider line */
        .cinema-line {
            width: 60px; height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 14px 0;
            opacity: 0;
            animation: fadeSlideUp 1s 1.4s ease forwards;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MAIN LAYOUT
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .main-content {
            position: relative; z-index: 1;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
            opacity: 0;
            transition: opacity 0.8s ease 0.3s;
        }
        .main-content.visible { opacity: 1; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           THEATER â€” The video/loading container
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .theater-wrapper {
            margin: 30px 0 20px;
        }
        .theater-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 4px 12px;
        }
        .theater-badge {
            display: flex; align-items: center; gap: 8px;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--gold);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        .theater-badge .pulse-dot {
            width: 6px; height: 6px;
            background: var(--gold);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 0 0 var(--gold-glow); }
            50% { opacity: 0.6; box-shadow: 0 0 0 6px transparent; }
        }
        .theater-live {
            display: flex; align-items: center; gap: 6px;
            font-family: var(--font-mono);
            font-size: 0.65rem;
            color: var(--cyan);
            letter-spacing: 1px;
            transition: opacity 0.5s ease;
        }
        .theater-live .dot {
            width: 5px; height: 5px;
            background: var(--cyan);
            border-radius: 50%;
            animation: pulse 1.5s ease-in-out infinite;
        }

        .theater {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: var(--deep);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(212, 168, 85, 0.08);
            box-shadow:
                0 0 80px rgba(0,0,0,0.6),
                0 0 40px rgba(212, 168, 85, 0.05),
                inset 0 0 80px rgba(0,0,0,0.3);
        }
        .theater video {
            width: 100%; height: 100%;
            object-fit: contain;
            display: none;
        }
        .theater video.ready { display: block; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LOADING EXPERIENCE â€” The main event
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .loader {
            position: absolute; inset: 0;
            display: flex;
            transition: opacity 0.8s ease;
        }
        .loader.done { opacity: 0; pointer-events: none; }

        /* LEFT PANEL â€” Cinema narrative + facts */
        .loader-narrative {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 30px 28px 30px 32px;
            position: relative;
            overflow: hidden;
        }
        .loader-narrative::after {
            content: '';
            position: absolute;
            right: 0; top: 10%; bottom: 10%;
            width: 1px;
            background: linear-gradient(180deg, transparent, rgba(212,168,85,0.15), transparent);
        }

        /* Narrative fact card */
        .fact-card {
            position: relative;
        }
        .fact-eyebrow {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--gold-dim);
            margin-bottom: 10px;
        }
        .fact-title {
            font-family: var(--font-display);
            font-size: clamp(1rem, 2.5vw, 1.35rem);
            font-weight: 600;
            color: var(--gold-pale);
            margin-bottom: 10px;
            line-height: 1.3;
        }
        .fact-body {
            font-family: var(--font-body);
            font-size: clamp(0.95rem, 2vw, 1.15rem);
            color: var(--text-dim);
            line-height: 1.7;
        }
        .fact-body em { color: var(--gold); font-style: normal; font-weight: 600; }

        /* Fact transition */
        .fact-card { animation: factIn 0.7s ease; }
        @keyframes factIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Fact navigation dots */
        .fact-nav {
            display: flex; gap: 5px;
            margin-top: 20px;
        }
        .fact-dot {
            width: 20px; height: 3px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            transition: all 0.4s ease;
        }
        .fact-dot.active {
            background: var(--gold);
            width: 32px;
            box-shadow: 0 0 8px var(--gold-glow);
        }
        .fact-dot.seen {
            background: rgba(212, 168, 85, 0.25);
        }

        /* RIGHT PANEL â€” Technical visualization */
        .loader-viz {
            width: 38%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            background: rgba(0,0,0,0.2);
            position: relative;
        }

        /* Circular progress */
        .ring-container {
            position: relative;
            width: 130px; height: 130px;
            margin-bottom: 16px;
        }
        .ring-svg { transform: rotate(-90deg); filter: drop-shadow(0 0 12px var(--gold-glow)); }
        .ring-bg {
            fill: none;
            stroke: rgba(255,255,255,0.05);
            stroke-width: 5;
        }
        .ring-fill {
            fill: none;
            stroke: url(#ringGrad);
            stroke-width: 5;
            stroke-linecap: round;
            stroke-dasharray: 345.575;
            stroke-dashoffset: 345.575;
            transition: stroke-dashoffset 0.4s ease;
        }
        .ring-percent {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-family: var(--font-mono);
            font-size: 1.8rem;
            font-weight: 300;
            color: var(--gold);
            letter-spacing: -1px;
        }
        .ring-percent span {
            font-size: 0.8rem;
            color: var(--gold-dim);
        }

        /* Page counter */
        .page-count {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 16px;
            letter-spacing: 0.5px;
        }
        .page-count .hi { color: var(--gold); }

        /* Phase steps */
        .phases {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .phase-row {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-mono);
            font-size: 0.6rem;
            color: var(--text-muted);
            letter-spacing: 0.5px;
            transition: color 0.3s ease;
        }
        .phase-row.active { color: var(--gold); }
        .phase-row.done { color: var(--gold-dim); }
        .phase-icon {
            width: 16px; height: 16px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.5rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        .phase-row.active .phase-icon {
            border-color: var(--gold);
            background: rgba(212, 168, 85, 0.15);
            box-shadow: 0 0 10px var(--gold-glow);
        }
        .phase-row.done .phase-icon {
            border-color: var(--gold-dim);
            background: rgba(212, 168, 85, 0.1);
            color: var(--gold);
        }

        /* Data stream visualization */
        .data-stream {
            width: 100%;
            height: 32px;
            margin-top: 14px;
            border-radius: 4px;
            overflow: hidden;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(212,168,85,0.06);
            position: relative;
            font-family: var(--font-mono);
            font-size: 0.5rem;
            color: rgba(212,168,85,0.4);
            display: flex;
            align-items: center;
            padding: 0 6px;
            letter-spacing: 0.5px;
            white-space: nowrap;
            overflow: hidden;
        }
        .data-stream-text {
            animation: streamScroll 8s linear infinite;
        }
        @keyframes streamScroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MOBILE LOADER â€” Stacked layout
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 700px) {
            .loader {
                flex-direction: column-reverse;
            }
            .loader-narrative {
                padding: 20px 20px 24px;
            }
            .loader-narrative::after { display: none; }
            .loader-viz {
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                gap: 12px;
                padding: 16px 20px;
                justify-content: center;
                border-bottom: 1px solid rgba(212,168,85,0.06);
            }
            .ring-container { width: 80px; height: 80px; margin: 0; }
            .ring-percent { font-size: 1.2rem; }
            .phases { width: auto; flex-direction: row; flex-wrap: wrap; gap: 4px 10px; }
            .data-stream { display: none; }
            .page-count { margin: 0; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           POST-LOAD â€” Info sections below video
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .info-panel {
            background: var(--deep);
            border: 1px solid rgba(212, 168, 85, 0.06);
            border-radius: 12px;
            padding: 32px;
            margin: 20px 0;
        }
        .info-panel h2 {
            font-family: var(--font-display);
            font-size: 1.15rem;
            color: var(--gold-pale);
            margin-bottom: 14px;
            letter-spacing: 0.5px;
        }
        .info-panel p {
            font-family: var(--font-body);
            font-size: 1.1rem;
            color: var(--text-dim);
            line-height: 1.75;
            margin-bottom: 14px;
        }
        .info-panel p:last-child { margin-bottom: 0; }
        .info-panel strong { color: var(--text); }

        /* Stats row */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        .stat {
            background: rgba(212, 168, 85, 0.03);
            border: 1px solid rgba(212, 168, 85, 0.06);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }
        .stat-val {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            font-weight: 400;
            color: var(--gold);
        }
        .stat-lbl {
            font-family: var(--font-ui);
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 4px;
            letter-spacing: 0.5px;
        }

        /* Tech explainer cards */
        .explainer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        .explainer-card {
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(212,168,85,0.05);
            border-radius: 10px;
            padding: 22px;
        }
        .explainer-card h3 {
            font-family: var(--font-display);
            font-size: 0.85rem;
            color: var(--gold);
            margin-bottom: 8px;
            display: flex; align-items: center; gap: 8px;
        }
        .explainer-card p {
            font-family: var(--font-body);
            font-size: 1rem;
            color: var(--text-dim);
            line-height: 1.65;
            margin: 0;
        }

        /* Download section */
        .download-section {
            background: linear-gradient(135deg, rgba(212,168,85,0.05), rgba(34,211,238,0.03));
            border: 1px solid rgba(212,168,85,0.1);
            border-radius: 12px;
            padding: 28px;
            margin: 20px 0;
            text-align: center;
        }
        .download-section h2 {
            font-family: var(--font-display);
            font-size: 1.1rem;
            color: var(--gold-pale);
            margin-bottom: 10px;
        }
        .download-section p {
            font-family: var(--font-body);
            font-size: 1.05rem;
            color: var(--text-dim);
            margin-bottom: 18px;
            line-height: 1.6;
        }
        .btn-download {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 12px 32px;
            background: linear-gradient(135deg, var(--gold), var(--gold-dim));
            color: var(--void);
            font-family: var(--font-display);
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.25s ease;
        }
        .btn-download:hover {
            box-shadow: 0 6px 24px var(--gold-glow);
            transform: translateY(-2px);
        }
        .btn-download:disabled {
            opacity: 0.3; cursor: not-allowed; transform: none; box-shadow: none;
        }

        /* Links */
        .links-bar {
            display: flex; flex-wrap: wrap; gap: 12px;
            justify-content: center;
            margin: 30px 0;
        }
        .link-btn {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-family: var(--font-display);
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: all 0.25s ease;
        }
        .link-primary {
            background: linear-gradient(135deg, var(--gold), var(--gold-dim));
            color: var(--void);
        }
        .link-primary:hover { box-shadow: 0 4px 20px var(--gold-glow); transform: translateY(-2px); }
        .link-secondary {
            border: 1px solid rgba(212,168,85,0.2);
            color: var(--gold);
        }
        .link-secondary:hover { border-color: var(--gold); box-shadow: 0 0 20px var(--gold-glow); }

        /* Footer */
        .site-footer {
            text-align: center;
            padding: 30px 20px 40px;
            font-family: var(--font-body);
            font-size: 0.95rem;
            color: var(--text-muted);
        }
        .site-footer a { color: var(--gold); text-decoration: none; }
        .site-footer a:hover { text-decoration: underline; }

        /* Error state */
        .error-box {
            position: absolute; inset: 0;
            display: none; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 30px; text-align: center;
            background: var(--deep);
        }
        .error-box.show { display: flex; }
        .error-box .icon { font-size: 2.5rem; margin-bottom: 16px; }
        .error-box p { font-family: var(--font-body); font-size: 1.1rem; color: var(--text-dim); margin-bottom: 16px; }
        .error-box button {
            padding: 10px 28px;
            background: var(--gold);
            color: var(--void);
            border: none; border-radius: 6px;
            font-family: var(--font-display);
            font-weight: 600; font-size: 0.8rem;
            cursor: pointer; letter-spacing: 1px;
        }

        /* Scroll reveal for post-load content */
        .below-fold { opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
        .below-fold.visible { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STAR FIELD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="starfield" id="starfield"></div>
<div class="bg-cosmos"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CINEMA INTRO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="cinema-intro" id="cinemaIntro">
    <div class="cinema-tagline">A Ledger Scrolls Premiere</div>
    <div class="cinema-line"></div>
    <div class="cinema-title">The First Video<br>Ever Stored on a Blockchain</div>
    <div class="cinema-subtitle">175 NFTs Â· Zero Servers Â· Reconstructed Live</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN CONTENT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="main-content" id="mainContent">

    <!-- Theater -->
    <div class="theater-wrapper">
        <div class="theater-header">
            <div class="theater-badge">
                <div class="pulse-dot"></div>
                <span>Reconstructing from Cardano</span>
            </div>
            <div class="theater-live" id="liveIndicator" style="opacity:0">
                <div class="dot"></div>
                <span>BLOCKCHAIN LIVE</span>
            </div>
        </div>

        <div class="theater" id="theater">
            <video id="videoPlayer" controls playsinline></video>

            <!-- Loading Experience -->
            <div class="loader" id="loader">
                <!-- LEFT: Narrative -->
                <div class="loader-narrative">
                    <div class="fact-card" id="factCard">
                        <div class="fact-eyebrow" id="factEyebrow">Initializing</div>
                        <div class="fact-title" id="factTitle">Connecting to the Cardano Blockchainâ€¦</div>
                        <div class="fact-body" id="factBody">Your browser is about to do something no browser has done before â€” reconstruct a complete video file from <em>175 on-chain NFTs</em>, with zero servers involved.</div>
                    </div>
                    <div class="fact-nav" id="factNav"></div>
                </div>

                <!-- RIGHT: Viz -->
                <div class="loader-viz">
                    <div class="ring-container">
                        <svg class="ring-svg" width="130" height="130" viewBox="0 0 130 130">
                            <defs>
                                <linearGradient id="ringGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" stop-color="#d4a855"/>
                                    <stop offset="100%" stop-color="#ffd700"/>
                                </linearGradient>
                            </defs>
                            <circle class="ring-bg" cx="65" cy="65" r="55"/>
                            <circle class="ring-fill" id="ringFill" cx="65" cy="65" r="55"/>
                        </svg>
                        <div class="ring-percent" id="ringPercent">0<span>%</span></div>
                    </div>

                    <div class="page-count">
                        NFT <span class="hi" id="pageNow">0</span> / <span id="pageTotal">175</span>
                    </div>

                    <div class="phases">
                        <div class="phase-row active" id="ph1"><div class="phase-icon">1</div> Querying Policy</div>
                        <div class="phase-row" id="ph2"><div class="phase-icon">2</div> Fetching NFTs</div>
                        <div class="phase-row" id="ph3"><div class="phase-icon">3</div> Extracting Payloads</div>
                        <div class="phase-row" id="ph4"><div class="phase-icon">4</div> Assembling Video</div>
                    </div>

                    <div class="data-stream" id="dataStream">
                        <div class="data-stream-text" id="streamText"></div>
                    </div>
                </div>
            </div>

            <!-- Error -->
            <div class="error-box" id="errorBox">
                <div class="icon">âš ï¸</div>
                <p id="errorMsg">Connection failed</p>
                <button onclick="location.reload()">Try Again</button>
            </div>
        </div>
    </div>

    <!-- Post-load info -->
    <section class="info-panel below-fold" id="infoPanel">
        <h2>What Just Happened</h2>
        <p>
            Your browser just reconstructed a complete <strong>MP4 video file</strong> by reading raw data
            from <strong>175 NFTs minted on the Cardano blockchain</strong>. No streaming server. No CDN.
            No IPFS link. The actual binary video data lives permanently in CIP-25 NFT metadata â€” and your
            browser stitched it back together in real-time.
        </p>
        <p>
            This makes it the <strong>first video ever stored entirely on any blockchain</strong>.
            It will remain playable for as long as Cardano exists â€” truly permanent, censorship-resistant media.
        </p>
        <div class="stats-row">
            <div class="stat">
                <div class="stat-val">175</div>
                <div class="stat-lbl">On-Chain NFTs</div>
            </div>
            <div class="stat">
                <div class="stat-val" id="finalSize">â€”</div>
                <div class="stat-lbl">Video Size</div>
            </div>
            <div class="stat">
                <div class="stat-val">MP4</div>
                <div class="stat-lbl">Format</div>
            </div>
            <div class="stat">
                <div class="stat-val">âˆ</div>
                <div class="stat-lbl">Lifespan</div>
            </div>
        </div>
    </section>

    <section class="info-panel below-fold" id="techPanel" style="transition-delay:0.15s">
        <h2>The Technology</h2>
        <div class="explainer-grid">
            <div class="explainer-card">
                <h3>ğŸ“œ Ledger Scrolls</h3>
                <p>An open-source standard for storing immutable data on the Cardano blockchain. Documents, images, audio, video â€” anything â€” permanently preserved on-chain. A library that cannot burn.</p>
            </div>
            <div class="explainer-card">
                <h3>ğŸ”— Koios API</h3>
                <p>A decentralized, community-run REST API for querying Cardano data. No API key required. No single point of failure. Your browser queries Koios to read NFT metadata directly from the chain.</p>
            </div>
            <div class="explainer-card">
                <h3>ğŸ§© CIP-25 Metadata</h3>
                <p>Cardano's native NFT metadata standard. Each of the 175 NFTs carries a payload of hex-encoded video data in its minting transaction metadata â€” readable by any Cardano tool.</p>
            </div>
            <div class="explainer-card">
                <h3>ğŸ” SHA-256 Verification</h3>
                <p>Every byte is cryptographically verifiable. The reconstructed file can be checked against the on-chain SHA-256 hash to guarantee nothing was altered â€” trustless data integrity.</p>
            </div>
        </div>
    </section>

    <section class="download-section below-fold" id="downloadPanel" style="transition-delay:0.3s">
        <h2>Take It With You</h2>
        <p>The video you just watched was reconstructed from immutable on-chain data. Download a perfect copy â€” the same bytes that will exist on Cardano forever.</p>
        <button class="btn-download" id="downloadBtn" disabled onclick="downloadVideo()">
            â¬‡ Download Video
        </button>
    </section>

    <section class="info-panel below-fold" style="transition-delay:0.45s">
        <h2>Create Your Own Scroll</h2>
        <p>
            Ledger Scrolls is fully open-source. Anyone can mint their own immutable data on Cardano â€”
            documents, images, audio, even video. Your data, permanently on-chain, readable by anyone,
            owned by no one. The tools, templates, and viewers are all free on GitHub.
        </p>
    </section>

    <div class="links-bar below-fold" style="transition-delay:0.6s">
        <a href="https://beacnpool.github.io/ledger-scrolls/" class="link-btn link-primary">ğŸ“š Explore Ledger Scrolls</a>
        <a href="https://github.com/beacnpool/ledger-scrolls" class="link-btn link-secondary" target="_blank">GitHub</a>
        <a href="https://beacnpool.org" class="link-btn link-secondary" target="_blank">BEACNpool</a>
    </div>

    <footer class="site-footer below-fold" style="transition-delay:0.7s">
        <p>Built by <a href="https://x.com/BEACNpool" target="_blank">@BEACNpool</a> Â· Cardano Stake Pool Â· A library that cannot burn</p>
    </footer>
</div>

<script>
/**
 * THE FIRST VIDEO ON A BLOCKCHAIN
 * Cinema-quality viewer with immersive loading narrative.
 *
 * The loading sequence (~60-90s) is treated as the main event â€”
 * a curated educational journey through the technology, not dead time.
 */
(function() {

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONFIG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CFG = {
    policyId: '38fbd56d7de6eb9df88599b5b102304df4c817aee53e4fb9c59cbed2',
    expected: 175,
    type: 'video/mp4',
    endpoints: [
        'https://koios.beacnpool.org/api/v1',
        'https://api.koios.rest/api/v1'
    ]
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NARRATIVE FACTS â€” The core engagement loop
// Each fact builds understanding while maintaining cinematic tension.
// Designed for ~5.5s per card, covering the full ~90s load time.
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FACTS = [
    {
        eyebrow: 'Right Now',
        title: 'Your Browser Is Reading the Blockchain',
        body: 'No app. No login. No download. Your browser is querying the <em>Cardano blockchain</em> directly through Koios â€” a decentralized API run by the community â€” to locate 175 NFTs that contain a video.'
    },
    {
        eyebrow: 'World First',
        title: 'The First Video Ever Stored Entirely On-Chain',
        body: 'Not a link to a server. Not an IPFS hash. The <em>actual binary video data</em> is encoded across 175 NFT metadata payloads on the Cardano blockchain. Every byte is on-chain.'
    },
    {
        eyebrow: 'How It Works',
        title: 'Split Across 175 NFTs',
        body: 'The original MP4 was split into 175 fragments. Each fragment was hex-encoded and embedded into a <em>CIP-25 NFT\'s minting metadata</em> â€” Cardano\'s native standard. Your browser is now collecting each piece.'
    },
    {
        eyebrow: 'The Pipeline',
        title: 'Query â†’ Fetch â†’ Stitch â†’ Play',
        body: 'Step 1: Query the policy ID to find all NFTs. Step 2: Fetch each NFT\'s metadata from the chain. Step 3: Extract hex payloads and concatenate in order. Step 4: Convert to a playable MP4 blob. <em>Pure client-side reconstruction.</em>'
    },
    {
        eyebrow: 'Koios API',
        title: 'Decentralized Data Access',
        body: 'Koios is a distributed, open-source API layer for Cardano. <em>No API key required.</em> No single company controls it. Multiple independent operators host endpoints â€” if one goes down, others keep serving. Your browser tries BEACNpool\'s Koios node first, with a public fallback.'
    },
    {
        eyebrow: 'CIP-25 Standard',
        title: 'Using Cardano\'s Native NFT Format',
        body: 'Every NFT page uses <em>CIP-25 metadata</em> â€” the same standard every Cardano NFT uses. This means the data is readable by any wallet, any explorer, any tool. No proprietary format. No vendor lock-in. Open data, forever.'
    },
    {
        eyebrow: 'Permanence',
        title: 'Immutable by Design',
        body: 'Once minted, CIP-25 metadata <em>cannot be changed, censored, or deleted</em>. The minting policy is time-locked â€” no new NFTs can ever be added, and existing ones are permanent. This video will exist for as long as Cardano runs.'
    },
    {
        eyebrow: 'Zero Dependencies',
        title: 'No Server. No CDN. No Hosting Bill.',
        body: 'Traditional video requires servers, bandwidth, and ongoing payment. This video requires <em>nothing</em> â€” just a browser and the blockchain. No infrastructure to maintain. No domain to renew. No company needs to stay in business.'
    },
    {
        eyebrow: 'Verification',
        title: 'Trustless Cryptographic Proof',
        body: 'The reconstructed video can be verified against a <em>SHA-256 cryptographic hash</em> stored on-chain. What you see is exactly what was minted â€” mathematically provable, no trust required.'
    },
    {
        eyebrow: 'Ledger Scrolls',
        title: 'A Library That Cannot Burn',
        body: 'The Library of Alexandria. The House of Wisdom. History is full of lost knowledge. Ledger Scrolls stores documents, images, audio, and video <em>permanently on the Cardano blockchain</em> â€” an open library that no fire, no war, no company shutdown can destroy.'
    },
    {
        eyebrow: 'Open Source',
        title: 'Anyone Can Create a Scroll',
        body: 'The tools are free. The standard is open. <em>Anyone can mint their own immutable data</em> on Cardano using Ledger Scrolls â€” from a single image to a multi-volume book. Mint it once, read it forever.'
    },
    {
        eyebrow: 'Already On-Chain',
        title: 'The Bible. The Constitution. Now Video.',
        body: 'The complete World English Bible. Both Cardano Constitutions. Philosophical texts. Historical documents. And now, the <em>first-ever on-chain video</em>. The permanent library grows with every scroll minted.'
    },
    {
        eyebrow: 'Did You Know',
        title: 'Over 2,800 Pages of Data On-Chain',
        body: 'Across all Ledger Scrolls, thousands of pages of <em>human knowledge</em> have already been permanently preserved. From sacred texts to governance frameworks to memes â€” all immutable, all verifiable, all free to read.'
    },
    {
        eyebrow: 'Almost There',
        title: 'Stitching 175 Fragments Together',
        body: 'Your browser is now concatenating hex-encoded payloads from across the Cardano ledger into a single MP4 binary. <em>The blockchain is becoming your video player.</em>'
    },
    {
        eyebrow: 'Final Assembly',
        title: 'Verifying & Preparing Playback',
        body: 'All NFT payloads collected. Bytes verified. Converting to a playable video blobâ€¦ <em>History is about to play.</em>'
    }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DOM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const $ = id => document.getElementById(id);
const el = {
    video: $('videoPlayer'),
    loader: $('loader'),
    ring: $('ringFill'),
    pct: $('ringPercent'),
    pageNow: $('pageNow'),
    factCard: $('factCard'),
    factEyebrow: $('factEyebrow'),
    factTitle: $('factTitle'),
    factBody: $('factBody'),
    factNav: $('factNav'),
    stream: $('streamText'),
    errorBox: $('errorBox'),
    errorMsg: $('errorMsg'),
    finalSize: $('finalSize'),
    downloadBtn: $('downloadBtn'),
    liveIndicator: $('liveIndicator')
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let factIndex = 0;
let factTimer = null;
let videoBlob = null;
const CIRC = 2 * Math.PI * 55;

// Build fact navigation dots
FACTS.forEach((_, i) => {
    const d = document.createElement('div');
    d.className = 'fact-dot' + (i === 0 ? ' active' : '');
    el.factNav.appendChild(d);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STAR FIELD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function initStars() {
    const c = document.getElementById('starfield');
    const n = window.innerWidth < 768 ? 40 : 80;
    for (let i = 0; i < n; i++) {
        const s = document.createElement('div');
        s.className = 'star';
        const size = 0.5 + Math.random() * 1.5;
        s.style.cssText = `
            left:${Math.random()*100}%;
            top:${Math.random()*100}%;
            width:${size}px;height:${size}px;
            --dur:${2+Math.random()*4}s;
            --o1:${0.15+Math.random()*0.35};
            --o2:${0.5+Math.random()*0.5};
            animation-delay:${Math.random()*5}s;
        `;
        c.appendChild(s);
    }
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AUTO-START â€” Intro plays, then transitions to reconstruction
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', () => {
    // Let the cinema intro animations play (~3s), then auto-transition
    setTimeout(() => {
        const intro = $('cinemaIntro');
        intro.classList.add('fade-out');
        const main = $('mainContent');
        setTimeout(() => { main.classList.add('visible'); }, 400);
        setTimeout(() => { intro.style.display = 'none'; startReconstruction(); }, 1400);
    }, 3200);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA STREAM VISUALIZER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function generateStreamHex() {
    const chars = '0123456789abcdef';
    let s = '';
    for (let i = 0; i < 300; i++) s += chars[Math.floor(Math.random()*16)];
    return s.match(/.{1,2}/g).join(' ') + '  Â·Â·Â·  ' + s.match(/.{1,2}/g).join(' ');
}
el.stream.textContent = generateStreamHex();
setInterval(() => { el.stream.textContent = generateStreamHex(); }, 8000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FACT ROTATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showFact(idx) {
    const f = FACTS[idx % FACTS.length];
    const card = el.factCard;
    card.style.animation = 'none';
    card.offsetHeight;
    card.style.animation = 'factIn 0.7s ease';

    el.factEyebrow.textContent = f.eyebrow;
    el.factTitle.textContent = f.title;
    el.factBody.innerHTML = f.body;

    const dots = el.factNav.querySelectorAll('.fact-dot');
    dots.forEach((d, i) => {
        d.className = 'fact-dot';
        if (i === idx % FACTS.length) d.classList.add('active');
        else if (i < idx % FACTS.length) d.classList.add('seen');
    });
}

function startFacts() {
    showFact(0);
    factTimer = setInterval(() => {
        factIndex++;
        showFact(factIndex);
    }, 5500);
}
function stopFacts() { if (factTimer) { clearInterval(factTimer); factTimer = null; } }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PROGRESS UI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setProgress(pct, page) {
    const offset = CIRC - (pct / 100) * CIRC;
    el.ring.style.strokeDashoffset = offset;
    el.pct.innerHTML = `${Math.round(pct)}<span>%</span>`;
    el.pageNow.textContent = page;
}

function setPhase(n) {
    for (let i = 1; i <= 4; i++) {
        const row = $(`ph${i}`);
        row.className = 'phase-row';
        if (i < n) row.classList.add('done');
        else if (i === n) row.classList.add('active');
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BLOCKCHAIN API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function koios(endpoint, body = null) {
    for (const base of CFG.endpoints) {
        try {
            const opts = {
                method: body ? 'POST' : 'GET',
                headers: body ? { 'Content-Type': 'application/json' } : {},
                body: body ? JSON.stringify(body) : null
            };
            const r = await fetch(`${base}${endpoint}`, opts);
            if (!r.ok) throw new Error(`HTTP ${r.status}`);
            return await r.json();
        } catch(e) { continue; }
    }
    throw new Error('All Koios endpoints failed. The blockchain may be temporarily unreachable.');
}

function hexToBytes(hex) {
    hex = hex.replace(/^0x/i, '').replace(/\s/g, '');
    const b = new Uint8Array(hex.length / 2);
    for (let i = 0; i < hex.length; i += 2) b[i/2] = parseInt(hex.substr(i, 2), 16);
    return b;
}

function hexToAscii(hex) {
    let s = '';
    for (let i = 0; i < hex.length; i += 2) s += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
    return s;
}

function extractPayloadHex(payload) {
    let hex = '';
    if (Array.isArray(payload)) {
        for (const e of payload) {
            if (typeof e === 'object' && e.bytes) hex += e.bytes.replace(/^0x/i, '');
            else if (typeof e === 'string') hex += e.replace(/^0x/i, '');
        }
    } else if (typeof payload === 'string') {
        hex = payload.replace(/^0x/i, '');
    }
    return hex.replace(/\s/g, '');
}

function formatSize(bytes) {
    if (bytes < 1024) return `${bytes} B`;
    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
    return `${(bytes / (1024 * 1024)).toFixed(2)} MB`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN RECONSTRUCTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function startReconstruction() {
    try {
        startFacts();
        el.liveIndicator.style.opacity = '1';
        el.ring.style.strokeDasharray = CIRC;
        el.ring.style.strokeDashoffset = CIRC;

        // Phase 1: Query policy
        setPhase(1);
        setProgress(3, 0);

        const assets = [];
        let offset = 0;
        while (true) {
            const batch = await koios(
                `/asset_list?policy_id=eq.${CFG.policyId}&limit=1000&offset=${offset}`
            );
            if (!batch || batch.length === 0) break;
            assets.push(...batch);
            if (batch.length < 1000) break;
            offset += 1000;
        }

        // Phase 2: Begin fetching
        setPhase(2);
        setProgress(8, 0);

        const pages = [];
        let done = 0;

        for (const asset of assets) {
            const name = asset.asset_name || '';
            const ascii = hexToAscii(name);
            if (!ascii.startsWith('CM_PAGE')) continue;

            done++;
            const pct = 10 + Math.floor((done / CFG.expected) * 72);
            setProgress(pct, done);
            if (done === 1) setPhase(3);

            try {
                const info = await koios('/asset_info', {
                    _asset_list: [[CFG.policyId, name]]
                });
                if (!info?.[0]) continue;
                const meta = info[0].minting_tx_metadata?.[721]?.[CFG.policyId]?.[ascii];
                if (!meta || meta.payload === undefined || meta.i === undefined) continue;
                pages.push({ index: parseInt(meta.i), payload: meta.payload });
            } catch(e) {
                console.warn(`Skip ${ascii}:`, e);
            }
            await new Promise(r => setTimeout(r, 50));
        }

        if (pages.length === 0) throw new Error('No page data found on the blockchain');

        // Phase 4: Assembly
        setPhase(4);
        setProgress(86, pages.length);
        pages.sort((a, b) => a.index - b.index);

        let allHex = '';
        for (const p of pages) allHex += extractPayloadHex(p.payload);

        setProgress(93, pages.length);
        const raw = hexToBytes(allHex);
        const sizeStr = formatSize(raw.length);
        el.finalSize.textContent = sizeStr;

        setProgress(98, pages.length);
        videoBlob = new Blob([raw], { type: CFG.type });
        const url = URL.createObjectURL(videoBlob);

        // Complete
        stopFacts();
        setProgress(100, pages.length);
        el.downloadBtn.disabled = false;

        // Transition to video
        await new Promise(r => setTimeout(r, 600));
        el.video.src = url;
        el.video.classList.add('ready');
        el.loader.classList.add('done');
        el.liveIndicator.style.opacity = '0';

        // Reveal below-fold content
        setTimeout(() => {
            document.querySelectorAll('.below-fold').forEach(el => {
                el.classList.add('visible');
            });
        }, 800);

    } catch(e) {
        console.error('Reconstruction failed:', e);
        stopFacts();
        el.loader.classList.add('done');
        el.errorBox.classList.add('show');
        el.errorMsg.textContent = e.message;
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DOWNLOAD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.downloadVideo = function() {
    if (!videoBlob) return;
    const a = document.createElement('a');
    a.href = URL.createObjectURL(videoBlob);
    a.download = 'first-video-on-cardano.mp4';
    a.click();
};

})();
</script>
</body>
</html>
